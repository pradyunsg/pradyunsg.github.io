<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>OSS Work update #4 | Pradyun Gedam</title><meta name=keywords content="Open Source Updates"><meta name=description content="I&rsquo;m trying to post these roughly once a month. Here&rsquo;s the September post.
Work I did (Sept 6 - Oct 5) Technical
 Figured out a rough structure for approaching pip&rsquo;s build logic refactor. Discussed and sketched a rough &ldquo;goal&rdquo; model for pip&rsquo;s build logic, to adopt after initial cleanups and decoupling refactor work. Made significant progress on refactoring pip&rsquo;s metadata handling and generation logic. (yay!) Identified a quirk in how pip&rsquo;s current resolution logic, which makes it conceptually intertwined with pip&rsquo;s index interaction logic (sigh)."><meta name=author content><link rel=canonical href=https://pradyunsg.me/blog/2019/10/06/oss-update-4/><link crossorigin=anonymous href=/assets/css/stylesheet.min.3d6bc2d744e85e443ce9e0035c0912877057e2f80577fe9ec24a45db5580cbf3.css integrity="sha256-PWvC10ToXkQ86eADXAkSh3BX4vgFd/6ewkpF21WAy/M=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://pradyunsg.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://pradyunsg.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://pradyunsg.me/favicon-32x32.png><link rel=apple-touch-icon href=https://pradyunsg.me/apple-touch-icon.png><link rel=mask-icon href=https://pradyunsg.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="OSS Work update #4"><meta property="og:description" content="I&rsquo;m trying to post these roughly once a month. Here&rsquo;s the September post.
Work I did (Sept 6 - Oct 5) Technical
 Figured out a rough structure for approaching pip&rsquo;s build logic refactor. Discussed and sketched a rough &ldquo;goal&rdquo; model for pip&rsquo;s build logic, to adopt after initial cleanups and decoupling refactor work. Made significant progress on refactoring pip&rsquo;s metadata handling and generation logic. (yay!) Identified a quirk in how pip&rsquo;s current resolution logic, which makes it conceptually intertwined with pip&rsquo;s index interaction logic (sigh)."><meta property="og:type" content="article"><meta property="og:url" content="https://pradyunsg.me/blog/2019/10/06/oss-update-4/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-10-06T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="OSS Work update #4"><meta name=twitter:description content="I&rsquo;m trying to post these roughly once a month. Here&rsquo;s the September post.
Work I did (Sept 6 - Oct 5) Technical
 Figured out a rough structure for approaching pip&rsquo;s build logic refactor. Discussed and sketched a rough &ldquo;goal&rdquo; model for pip&rsquo;s build logic, to adopt after initial cleanups and decoupling refactor work. Made significant progress on refactoring pip&rsquo;s metadata handling and generation logic. (yay!) Identified a quirk in how pip&rsquo;s current resolution logic, which makes it conceptually intertwined with pip&rsquo;s index interaction logic (sigh)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Scribbled Notes","item":"https://pradyunsg.me/blog/"},{"@type":"ListItem","position":2,"name":"OSS Work update #4","item":"https://pradyunsg.me/blog/2019/10/06/oss-update-4/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"OSS Work update #4","name":"OSS Work update #4","description":"I\u0026rsquo;m trying to post these roughly once a month. Here\u0026rsquo;s the September post.\nWork I did (Sept 6 - Oct 5) Technical\n Figured out a rough structure for approaching pip\u0026rsquo;s build logic refactor. Discussed and sketched a rough \u0026ldquo;goal\u0026rdquo; model for pip\u0026rsquo;s build logic, to adopt after initial cleanups and decoupling refactor work. Made significant progress on refactoring pip\u0026rsquo;s metadata handling and generation logic. (yay!) Identified a quirk in how pip\u0026rsquo;s current resolution logic, which makes it conceptually intertwined with pip\u0026rsquo;s index interaction logic (sigh).","keywords":["Open Source Updates"],"articleBody":"I’m trying to post these roughly once a month. Here’s the September post.\nWork I did (Sept 6 - Oct 5) Technical\n Figured out a rough structure for approaching pip’s build logic refactor. Discussed and sketched a rough “goal” model for pip’s build logic, to adopt after initial cleanups and decoupling refactor work. Made significant progress on refactoring pip’s metadata handling and generation logic. (yay!) Identified a quirk in how pip’s current resolution logic, which makes it conceptually intertwined with pip’s index interaction logic (sigh).  out-of-scope for the ongoing “build logic refactor”, but we do need to resolve this at some point.   Revamped pip’s linting pipeline to be… simpler (i.e. better). Multiple miscellaneous fixes/cleanup to pip. A lots of PRs reviewed (80). Reviewed and merged ABNF-related PRs, for TOML. Sunk a good day to debugging 500s on GitHub (it was due to emojis). :(  Communication\n Reached out to quite a few folks regarding my semester-long internship. Discuss goals and approaches, for pip’s build logic refactor, with fellow pip maintainers across multiple issues on the issue tracker. Had a chat w/ a pipenv maintainer, discussing the resolver code reuse situation, and some design discussion about the ongoing build logic refactoring. Had multiple chats with fellow pip maintainers, discussing a rough plan and target, for the build logic refactor as well as our development workflow. Polished up my proposed “Status-Quo” PyPA governance model. Reviewed a proposal for better licensing metadata for Python Packages.  Additional notes on challenges I had more exams! I’d hoped to get more work done but I hadn’t realize that I’d have exams over 2 weekends – Sunday, 29 Sept to Sunday, 6 Oct. (yay college)\nIn addition, I realized that my initial approach toward reworking pip’s “prepare distribution” logic was fatally flawed because I forgot about a usecase. My discussions with pipenv and pip maintainers were very fruitful and we pooled our combined knowledge of the tooling into text documents and diagrams. We’ve come up with a more feasible (and much better) plan than the one I had come up with on my own.\nRecently, I read something on discuss.python.org, that just perfectly encapsulates how I feel about this stuff:\n  all of this stuff is really hard and there’s a lot of knowledge scattered around in people’s heads that could really do with being captured somewhere Paul Moore (regarding a different topic)  Overall, I made time to work on pip this month, and made significant progress on cleaning up pip’s metadata generation and handling logic.\nGoals for October Technical\n Wrap up refactoring metadata generation and handling in pip. Work on a “blessed” TOML’s compliance suite, as we prepare for TOML 1.0. (stretch goal) Begin refactoring the next component – installation.  Communication\n Update the GitHub Project board for pip’s build logic refactor, based on the mental model built over the past few discussions. Attend PyCon India:  Give a talk about the state of Python Packaging. Run a sprint on pip, packaging and pypa-bot (and more?).   Figure out my internship situation and getting approval from my HoD for the internship I’d be doing.  Other commitments I expect to have some time to work on pip in October, though not as much as September.\nIn mid-October, I’ll be speaking at PyCon India 2019 (noted above) and I expect from today until my talk, almost all of my free time would be going towards that talk preparation. After that, I am expecting that I’ll spend a few days going through the processes for approvals, at college, related to my final semester internship.\nHelp us How can you help us?\n provide test cases where the latest released version of pip (19.2.3, at the time of writing) fails to resolve dependencies properly (on zazo’s issue tracker). They will help us design and test the new resolver. talk with your company about becoming a PSF sponsor. The Fundable Packaging Improvements page now summarizes what bugfixes/features/projects within and outside PyPA are blocked on the new resolver, some background context, and how funding would help us get it finished faster. triage pip bugs! Around 10% of pip’s issues have not been triaged yet and many others need of action/review. help improve our “how to triage pip bugs” guide. volunteer to help us build robust testing infrastructure  ","wordCount":"709","inLanguage":"en","datePublished":"2019-10-06T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://pradyunsg.me/blog/2019/10/06/oss-update-4/"},"publisher":{"@type":"Organization","name":"Pradyun Gedam","logo":{"@type":"ImageObject","url":"https://pradyunsg.me/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://pradyunsg.me/ accesskey=h title="Pradyun Gedam (Alt + H)">Pradyun Gedam</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://pradyunsg.me/about/ title=about><span>about</span></a></li><li><a href=https://pradyunsg.me/blog/ title=Blog><span>blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>OSS Work update #4</h1><div class=post-meta>October 6, 2019&nbsp;·&nbsp;4 minutes</div></header><div class=post-content><p>I&rsquo;m trying to post these roughly once a month. <a href=/blog/2019/09/06/oss-update-3/>Here&rsquo;s the September post</a>.</p><h2 id=work-i-did-sept-6---oct-5>Work I did (Sept 6 - Oct 5)<a hidden class=anchor aria-hidden=true href=#work-i-did-sept-6---oct-5>#</a></h2><p><strong>Technical</strong></p><ul><li>Figured out a rough structure for approaching pip&rsquo;s build logic refactor.</li><li>Discussed and sketched a rough &ldquo;goal&rdquo; model for pip&rsquo;s build logic, to adopt after initial cleanups and decoupling refactor work.</li><li>Made significant progress on refactoring pip&rsquo;s metadata handling and generation logic. (yay!)</li><li>Identified a quirk in how pip&rsquo;s current resolution logic, which makes it conceptually intertwined with pip&rsquo;s index interaction logic (<em>sigh</em>).<ul><li>out-of-scope for the ongoing &ldquo;build logic refactor&rdquo;, but we do need to resolve this at some point.</li></ul></li><li>Revamped pip&rsquo;s linting pipeline to be&mldr; simpler (i.e. better).</li><li>Multiple miscellaneous fixes/cleanup to pip.</li><li>A lots of PRs reviewed (>80).</li><li>Reviewed and merged ABNF-related PRs, for TOML.</li><li>Sunk a good day to debugging 500s on GitHub (it was due to emojis). :(</li></ul><p><strong>Communication</strong></p><ul><li>Reached out to quite a few folks regarding my <a href=https://twitter.com/pradyunsg/status/1174186350389661696>semester-long internship</a>.</li><li>Discuss goals and approaches, for pip&rsquo;s build logic refactor, with fellow pip maintainers across multiple issues on the issue tracker.</li><li>Had a chat w/ a pipenv maintainer, discussing the resolver code reuse situation, and some design discussion about the ongoing build logic refactoring.</li><li>Had multiple chats with fellow pip maintainers, discussing a rough plan and target, for the build logic refactor as well as our development workflow.</li><li>Polished up my proposed &ldquo;Status-Quo&rdquo; PyPA governance model.</li><li>Reviewed a proposal for better licensing metadata for Python Packages.</li></ul><h2 id=additional-notes-on-challenges>Additional notes on challenges<a hidden class=anchor aria-hidden=true href=#additional-notes-on-challenges>#</a></h2><p>I had more exams! I&rsquo;d hoped to get more work done but I hadn&rsquo;t realize that I&rsquo;d have exams over 2 weekends &ndash; Sunday, 29 Sept to Sunday, 6 Oct. (yay college)</p><p>In addition, I realized that my <a href=https://github.com/pypa/pip/pull/6990>initial approach</a> toward reworking pip&rsquo;s &ldquo;prepare distribution&rdquo; logic was fatally flawed because I forgot about a usecase. My discussions with pipenv and pip maintainers were very fruitful and we pooled our combined knowledge of the tooling into text documents and diagrams. We&rsquo;ve come up with a more feasible (and much better) plan than the one I had come up with on my own.</p><p>Recently, I read something on discuss.python.org, that just perfectly encapsulates how I feel about this stuff:</p><blockquote><p>all of this stuff is really hard and there’s a lot of knowledge scattered around in people’s heads that could really do with being captured somewhere</p><footer><cite title="Paul Moore">Paul Moore (regarding a different topic)</cite></footer></blockquote><p>Overall, I made time to work on pip this month, and made significant progress on cleaning up pip&rsquo;s metadata generation and handling logic.</p><h2 id=goals-for-october>Goals for October<a hidden class=anchor aria-hidden=true href=#goals-for-october>#</a></h2><p><strong>Technical</strong></p><ul><li>Wrap up refactoring metadata generation and handling in pip.</li><li>Work on a &ldquo;blessed&rdquo; TOML&rsquo;s compliance suite, as we prepare for TOML 1.0.</li><li>(stretch goal) Begin refactoring the next component &ndash; installation.</li></ul><p><strong>Communication</strong></p><ul><li>Update the GitHub Project board for pip&rsquo;s build logic refactor, based on the mental model built over the past few discussions.</li><li>Attend PyCon India:<ul><li><a href=https://in.pycon.org/cfp/2019/proposals/python-packaging-where-we-are-and-where-were-headed~dGV8b/>Give a talk</a> about the state of Python Packaging.</li><li>Run a <a href=https://in.pycon.org/cfp/devsprint-2019/proposals/python-packaging-pip-and-more~e35nb/>sprint</a> on pip, packaging and pypa-bot (and more?).</li></ul></li><li>Figure out my internship situation and getting approval from my HoD for the internship I&rsquo;d be doing.</li></ul><h2 id=other-commitments>Other commitments<a hidden class=anchor aria-hidden=true href=#other-commitments>#</a></h2><p>I expect to have some time to work on pip in October, though not as much as September.</p><p>In mid-October, I&rsquo;ll be speaking at PyCon India 2019 (noted above) and I expect from today until my talk, almost all of my free time would be going towards that talk preparation. After that, I am expecting that I&rsquo;ll spend a few days going through the processes for approvals, at college, related to my final semester internship.</p><h2 id=help-us>Help us<a hidden class=anchor aria-hidden=true href=#help-us>#</a></h2><p>How can you help us?</p><ul><li>provide test cases where the latest released version of pip (19.2.3, at the time of writing) fails to resolve dependencies properly (on <a href=https://github.com/pradyunsg/zazo/issues>zazo&rsquo;s issue tracker</a>). They will help us design and test the new resolver.</li><li>talk with your company about becoming a PSF sponsor. The <a href=https://wiki.python.org/psf/Fundable%20Packaging%20Improvements>Fundable Packaging Improvements page</a> now summarizes what bugfixes/features/projects within and outside PyPA are blocked on the new resolver, some background context, and how funding would help us get it finished faster.</li><li>triage pip bugs! Around 10% of pip&rsquo;s issues have not been triaged yet and many others need of action/review.</li><li>help improve our <a href=https://pip.pypa.io/en/latest/development/issue-triage/>&ldquo;how to triage pip bugs&rdquo; guide</a>.</li><li>volunteer to <a href=https://github.com/pypa/integration-test/issues>help us build robust testing infrastructure</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://pradyunsg.me/tags/open-source-updates/>Open Source Updates</a></li></ul><nav class=paginav><a class=prev href=https://pradyunsg.me/blog/2019/11/02/state-of-bpo/><span class=title>« Newer</span><br><span>What's up with bugs.python.org?</span></a>
<a class=next href=https://pradyunsg.me/blog/2019/09/06/oss-update-3/><span class=title>Older »</span><br><span>OSS Work update #3</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://pradyunsg.me/>Pradyun Gedam</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
with tweaks.</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script></body></html>