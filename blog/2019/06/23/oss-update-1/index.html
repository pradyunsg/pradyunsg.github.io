<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>What's happening with that pip dependency resolver? | Pradyun Gedam</title><meta name=keywords content="Open Source Updates"><meta name=description content="I&rsquo;m glad you asked.
What&rsquo;s up? Over the past few months, I&rsquo;ve worked on a prototype for a resolver in pip, spent some time planning what rolling out a new dependency resolver in pip might look like, and continue to work on pip&rsquo;s build logic to decouple it from the dependency resolution logic.
The prototype has helped me better understand the relationships and contracts between various portions of the codebase. This understanding has led me to conclude that it is a worthwhile investment to better decouple the build logic from the resolution logic, then introduce the abstractions defined in resolvelib/zazo, and then proceed to adopting better dependency resolution."><meta name=author content><link rel=canonical href=http://pradyunsg.me/blog/2019/06/23/oss-update-1/><link crossorigin=anonymous href=/assets/css/stylesheet.min.162ead5dda599a0c3f3574806db2a636d641f549e195a36b3fb2641eccb9023b.css integrity="sha256-Fi6tXdpZmgw/NXSAbbKmNtZB9UnhlaNrP7JkHsy5Ajs=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=http://pradyunsg.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://pradyunsg.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://pradyunsg.me/favicon-32x32.png><link rel=apple-touch-icon href=http://pradyunsg.me/apple-touch-icon.png><link rel=mask-icon href=http://pradyunsg.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><meta property="og:title" content="What's happening with that pip dependency resolver?"><meta property="og:description" content="I&rsquo;m glad you asked.
What&rsquo;s up? Over the past few months, I&rsquo;ve worked on a prototype for a resolver in pip, spent some time planning what rolling out a new dependency resolver in pip might look like, and continue to work on pip&rsquo;s build logic to decouple it from the dependency resolution logic.
The prototype has helped me better understand the relationships and contracts between various portions of the codebase. This understanding has led me to conclude that it is a worthwhile investment to better decouple the build logic from the resolution logic, then introduce the abstractions defined in resolvelib/zazo, and then proceed to adopting better dependency resolution."><meta property="og:type" content="article"><meta property="og:url" content="http://pradyunsg.me/blog/2019/06/23/oss-update-1/"><meta property="article:section" content="blog"><meta property="article:modified_time" content="2021-04-09T18:29:14+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="What's happening with that pip dependency resolver?"><meta name=twitter:description content="I&rsquo;m glad you asked.
What&rsquo;s up? Over the past few months, I&rsquo;ve worked on a prototype for a resolver in pip, spent some time planning what rolling out a new dependency resolver in pip might look like, and continue to work on pip&rsquo;s build logic to decouple it from the dependency resolution logic.
The prototype has helped me better understand the relationships and contracts between various portions of the codebase. This understanding has led me to conclude that it is a worthwhile investment to better decouple the build logic from the resolution logic, then introduce the abstractions defined in resolvelib/zazo, and then proceed to adopting better dependency resolution."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Scribbled Notes","item":"http://pradyunsg.me/blog/"},{"@type":"ListItem","position":2,"name":"What's happening with that pip dependency resolver?","item":"http://pradyunsg.me/blog/2019/06/23/oss-update-1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"What's happening with that pip dependency resolver?","name":"What\u0027s happening with that pip dependency resolver?","description":"I\u0026rsquo;m glad you asked.\nWhat\u0026rsquo;s up? Over the past few months, I\u0026rsquo;ve worked on a prototype for a resolver in pip, spent some time planning what rolling out a new dependency resolver in pip might look like, and continue to work on pip\u0026rsquo;s build logic to decouple it from the dependency resolution logic.\nThe prototype has helped me better understand the relationships and contracts between various portions of the codebase. This understanding has led me to conclude that it is a worthwhile investment to better decouple the build logic from the resolution logic, then introduce the abstractions defined in resolvelib/zazo, and then proceed to adopting better dependency resolution.","keywords":["Open Source Updates"],"articleBody":"I’m glad you asked.\nWhat’s up? Over the past few months, I’ve worked on a prototype for a resolver in pip, spent some time planning what rolling out a new dependency resolver in pip might look like, and continue to work on pip’s build logic to decouple it from the dependency resolution logic.\nThe prototype has helped me better understand the relationships and contracts between various portions of the codebase. This understanding has led me to conclude that it is a worthwhile investment to better decouple the build logic from the resolution logic, then introduce the abstractions defined in resolvelib/zazo, and then proceed to adopting better dependency resolution.\nWhat’s next? The work on refactoring pip’s build logic is in progress and we’re tracking it on GitHub. Significant technical debt has been accumulated in this part of pip’s codebase over the years, so this is a big project that will likely take multiple months. This would/will also make it easier to provide more user-friendly error messaging, though that is not something that I will pursue in this project.\nThis investment will enable us to untangle pip’s internals from the resolver, enabling pip to share code for dependency resolution with other packaging tooling (like pipenv and hatch) and reuse the work they have done (e.g., work done on pipenv’s resolver). This also makes a softer rollout possible, one that allows us to iterate based on feedback from users and minimize disruption.\nHelp us How you can help us?\n  triage pip bugs! Around 20% of pip’s issues have not been triaged yet.\n  draft a “how to triage pip bugs” guide.\n  provide test cases where the latest released version of pip (19.1.1, at the time of writing) fails to resolve dependencies properly (on zazo’s issue tracker). They will help us test the new resolver.\n  look at New Resolver: Rollout, Feedback Loops and Development Flow and help us decide: Is the feature flag approach a good idea? Is it a good idea to get rollout feedback via some mechanism other than the pip GitHub issues? Any other thoughts to help us smooth out the rollout?\n  talk with your company about becoming a PSF sponsor. The Fundable Packaging Improvements page now summarizes what bugfixes/features/projects within and outside PyPA are blocked on the new resolver, some background context, and how funding would help us get it finished faster.\n  volunteer to help us build robust testing infrastructure\n  Thanks to Sumana Harihareswara for (a lot of) help in writing this, and Dan Ryan for reviewing the content!\n","wordCount":"418","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"2021-04-09T18:29:14+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://pradyunsg.me/blog/2019/06/23/oss-update-1/"},"publisher":{"@type":"Organization","name":"Pradyun Gedam","logo":{"@type":"ImageObject","url":"http://pradyunsg.me/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=http://pradyunsg.me/ accesskey=h title="Pradyun Gedam (Alt + H)">Pradyun Gedam</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=http://pradyunsg.me/about/ title=About><span>about</span></a></li><li><a href=http://pradyunsg.me/blog/ title=Writing><span>writing</span></a></li><li><a href=http://pradyunsg.me/talks/ title=Speaking><span>speaking</span></a></li><li><a href=http://pradyunsg.me/stuff/ title="Other stuff"><span>other stuff</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>What's happening with that pip dependency resolver?</h1><div class=post-meta>Last updated April 9, 2021&nbsp;·&nbsp;June 23, 2019&nbsp;·&nbsp;2 minutes</div></header><div class=post-content><p>I&rsquo;m glad you asked.</p><h2 id=whats-up>What&rsquo;s up?<a hidden class=anchor aria-hidden=true href=#whats-up>#</a></h2><p>Over the past few months, I&rsquo;ve worked on <a href=https://github.com/pradyunsg/pip/tree/resolver/make-it-inside>a prototype for a resolver in pip</a>, spent some time <a href=https://github.com/pypa/pip/issues/6536>planning</a> what rolling out a new dependency resolver in pip might look like, and continue to <a href=https://github.com/pypa/pip/projects/3>work on pip&rsquo;s build logic</a> to decouple it from the dependency resolution logic.</p><p>The prototype has helped me better understand the relationships and contracts between various portions of the codebase. This understanding has led me to conclude that it is a worthwhile investment to better decouple the build logic from the resolution logic, <em>then</em> introduce the abstractions defined in <a href=https://pypi.org/project/resolvelib/>resolvelib</a>/<a href=https://github.com/pradyunsg/zazo/>zazo</a>, and <em>then</em> proceed to adopting better dependency resolution.</p><h2 id=whats-next>What&rsquo;s next?<a hidden class=anchor aria-hidden=true href=#whats-next>#</a></h2><p>The work on refactoring pip&rsquo;s build logic is in progress and we&rsquo;re tracking it on <a href=https://github.com/pypa/pip/projects/3>GitHub</a>. Significant technical debt has been accumulated in this part of pip&rsquo;s codebase over the years, so this is a big project that will likely take multiple months. This would/will also make it easier to <a href=https://github.com/pypa/pip/milestone/25>provide more user-friendly error messaging</a>, though that is not something that I will pursue in this project.</p><p>This investment will enable us to untangle pip&rsquo;s internals from the resolver, enabling pip to share code for dependency resolution with other packaging tooling (like <a href=https://github.com/pypa/pipenv/>pipenv</a> and <a href=https://github.com/ofek/hatch/>hatch</a>) and reuse the work they have done (e.g., work done on pipenv&rsquo;s resolver). This also makes a softer rollout possible, one that allows us to iterate based on feedback from users and minimize disruption.</p><h2 id=help-us>Help us<a hidden class=anchor aria-hidden=true href=#help-us>#</a></h2><p>How you can help us?</p><ul><li><p>triage pip bugs! Around 20% of pip&rsquo;s issues have not been triaged yet.</p></li><li><p><a href=https://github.com/pypa/pip/issues/6583>draft a &ldquo;how to triage pip bugs&rdquo; guide</a>.</p></li><li><p>provide test cases where the latest released version of pip (19.1.1, at the time of writing) fails to resolve dependencies properly (on <a href=https://github.com/pradyunsg/zazo/issues>zazo&rsquo;s issue tracker</a>). They will help us test the new resolver.</p></li><li><p>look at <a href=https://github.com/pypa/pip/issues/6536>New Resolver: Rollout, Feedback Loops and Development Flow</a> and help us decide: Is the feature flag approach a good idea? Is it a good idea to get rollout feedback via some mechanism other than the pip GitHub issues? Any other thoughts to help us smooth out the rollout?</p></li><li><p>talk with your company about becoming a PSF sponsor. The <a href=https://wiki.python.org/psf/Fundable%20Packaging%20Improvements>Fundable Packaging Improvements page</a> now summarizes what bugfixes/features/projects within and outside PyPA are blocked on the new resolver, some background context, and how funding would help us get it finished faster.</p></li><li><p>volunteer to <a href=https://github.com/pypa/integration-test/issues>help us build robust testing infrastructure</a></p></li></ul><p>Thanks to Sumana Harihareswara for (a lot of) help in writing this, and Dan Ryan for reviewing the content!</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://pradyunsg.me/tags/open-source-updates/>Open Source Updates</a></li></ul><nav class=paginav><a class=prev href=http://pradyunsg.me/blog/2019/08/06/oss-update-2/><span class=title>« Newer</span><br><span>OSS Work update #2</span></a>
<a class=next href=http://pradyunsg.me/blog/2019/06/22/is-this-thing-on/><span class=title>Older »</span><br><span>Is this thing on?</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=http://pradyunsg.me/>Pradyun Gedam</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a>
and <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a> with tweaks</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>